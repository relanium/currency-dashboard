#!/bin/bash

# 1. Додаємо ТІЛЬКИ те, що ми редагуємо локально (дизайн та сам скрипт)
# Ми не додаємо CSV тут через "add .", щоб не затерти нові дані на сервері
git add index.html push_site.sh

# 2. Фіксуємо зміни
git commit -m "Update: $(date '+%Y-%m-%d %H:%M') - оновлення інтерфейсу та фільтрів"

# 3. ПІДТЯГУЄМО свіжий CSV з GitHub (який туди настріляв бот)
# Використовуємо --rebase, щоб твій комміт з дизайном став красиво в кінець черги
git pull origin main --rebase

# 4. Відправляємо оновлений index.html на GitHub
if git push origin main; then
    echo "✅ Сайт оновлено, дані синхронізовано з GitHub!"
else
    echo "❌ Помилка при відправці! Можливо, треба перевірити конфлікти."
    exit 1
fi

# Наше з тобою нагадування:
echo "«Не можна бути настільки досконалим, щоб обсягнути все»"